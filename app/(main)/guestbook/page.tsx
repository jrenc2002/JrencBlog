import { type Metadata } from 'next'
import Balancer from 'react-wrap-balancer'

import { Container } from '~/components/ui/Container'
import { fetchGuestbookMessages } from '~/db/queries/guestbook'

import { Guestbook } from './Guestbook'

const title = '留言墙'
const description =
  '不能攻击小鹿哦！(其实不过分的话也可以ଳ)有什么想说的话可以在这留言哦！给小郭的彩蛋↓'
export const metadata = {
  title,
  description,
  openGraph: {
    title,
    description,
  },
  twitter: {
    title,
    description,
    card: 'summary_large_image',
  },
} satisfies Metadata

export default async function GuestBookPage() {
  const messages = await fetchGuestbookMessages()

  return (
    <Container className="mt-16 sm:mt-32">
      <header className="max-w-2xl">
        <h1 className="text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl">
          小鹿的留言墙(ᕑᗢᓫ∗)˒
        </h1>
        <p className="mt-6 text-base text-zinc-600 dark:text-zinc-400">
          <Balancer>{description}</Balancer>
        </p>
      </header>
      <div className="mt-6 ">
        <svg height="auto" cursor="default" id="svg_document" width="100%" viewBox="0 0 700 560">
          <path stroke="#A3CB5C" stroke-width="10px"
                d="M49.9978 0.5H79.9978C65.85 10.6136 51.1652 13.7792 22.4978 18.5H101.998C80.5163 29.642 65.0198 32.588 36.4978 37H83.4978C93.8609 40.3366 95.2777 43.91 95.9978 51V78C92.3787 85.6993 89.11 88.2826 80.4978 89H41.4978C36.4254 86.9107 33.9585 84.9126 31.9978 76V48C31.3695 45.7339 31.3514 44.3413 34.9978 40.5V107H86.4978C92.7938 109.416 94.6346 111.779 92.9978 119L75.4978 138.5C70.0915 147.411 68.477 152.11 68.4978 160.5V233.5C63.5241 239.902 59.7113 241.095 51.4978 240C46.2475 205.967 42.8527 186.957 20.9978 155.5C56.6017 166.083 75.3851 165.205 107.498 155.5L121.998 240V16C123.224 10.1593 124.647 8.02404 128.998 7H147.498C157.049 9.80399 159.744 13.1426 160.498 22V78C156.3 87.7356 153.189 91.4152 145.498 93C157.085 95.9931 160.015 100.209 160.498 111L159.498 187C155.517 198.176 151.193 201.873 136.998 200.5C170.944 157.333 185.402 126.399 200.498 55.5L198.998 235L251.998 222.5L222.498 225V9H192.998V7H253.498V9H223.998V117C241.528 118.342 247.662 114.732 246.498 94V57C261.728 42.0454 266.256 32.1029 269.498 12.5C266.261 24.4536 268.053 28.5447 277.998 31H332.998L321.498 36C307.538 124.117 293.793 168.042 263.998 241.5C268.63 174.805 275.045 138.732 267.998 68C275.702 62.8022 279.398 64.4554 284.498 75L334.498 240C347.726 168.119 354.437 127.575 356.998 52H504.998L481.998 28C485.998 132 467.498 148.5 359.998 240C373.506 155.106 378.163 102.603 381.998 1.5V77.5C388.566 124.414 396.402 146.57 424.498 172L504.998 240C520.69 175.37 528.873 138.871 529.998 68H675.498C631.696 60.414 615 46.5691 601.498 2V231C579.598 232.466 567.069 234.233 543.998 240C591.213 228.379 616.501 229.29 659.998 241.5C970.493 273.673 -187.227 249.559 27.9978 318H58.9978C70.262 317.623 75.1561 315.276 81.4978 307.5C77.2205 314.595 73.186 317.769 58.9978 320L57.4978 531.5C50.2889 539.446 44.625 539.993 33.4978 538.5L21.4978 465L86.9978 419.5L21.4978 368.5H162.998C165.818 359.132 165.364 353.447 162.998 343L153.998 304.5C137.151 298.814 125.634 297.631 101.498 299C114.834 298.887 119.596 303.283 119.998 324.5C125.893 443.251 137.826 483.854 164.998 538.5H83.9978C100.026 476.794 119.454 446.462 162.998 396C186.044 366.103 190.537 344.311 201.998 307.5H303.998C312.611 304.525 316.937 302.033 323.998 296.5L313.998 324.5L307.498 350.5C283.881 343.782 274.298 336.846 259.498 322.5L265.998 350.5C242.077 342.524 231.212 335.658 212.498 322.5L218.998 350.5L194.498 431C195.852 422.734 196.286 417.482 196.998 408V382C199.284 371.196 201.993 366.717 212.498 365H313.998C322.511 367.027 326.242 369.8 329.498 380V411.5C330.234 421.868 330.727 426.786 331.998 431L247.998 384C229.227 423.641 218.215 445.036 196.998 480.5C193.145 477.637 203.002 425.458 216.498 400H307.498L297.998 433C303.493 442.414 303.691 449.174 301.498 462.5C293.926 478.213 288.414 486.181 274.998 498L218.998 538.5L268.998 500L321.498 539.5L265.498 496.5C255.498 491 249.701 483.139 242.498 469.5C237.783 459.34 234.684 453.989 238.998 437C244.653 429.953 248.388 428.681 255.498 428.5C262.834 430.674 266.168 433.113 270.498 440C274.278 432.649 277.169 430.23 283.498 428.5C288.469 428.656 291.124 428.875 293.998 431L296.498 433C341.443 470.877 362.602 493.31 382.998 538.5V396C382.17 386.068 378.309 383.142 366.498 384C359.004 378.982 357.497 375.072 362.498 365L392.498 300H421.998C410.896 316.146 414.592 320.517 434.498 322H489.498C498.935 322.651 501.596 325.602 500.998 336L493.998 349.5L457.498 345V525.5C456.269 535.545 452.292 537.79 441.998 538.5H404.498L420.998 385.5L506.498 538.5L491.998 385.5"
                fill="none">
            <animate values="0,19000;19000,0;" attributeType="XML" begin="0; animate1.end+5s" id="animateSig1"
                     repeatCount="1" attributeName="stroke-dasharray" fill="freeze" dur="10"></animate>
          </path>
        </svg>
      </div>
      <div className="mt-16 sm:mt-20">
        <Guestbook messages={messages} />
      </div>
    </Container>
  )
}
